# 可视化模式 (Visual Mode)

[![YYQ](https://pica.zhimg.com/v2-c4432de041354a82800b86e53483c9c7_xs.jpg?source=172ae18b)](https://www.zhihu.com/people/anthony.yuan)

[YYQ](https://www.zhihu.com/people/anthony.yuan)

一个安静的家伙 对大多数事情都没有兴趣

关注他

12 人赞同了该文章

在可视化模式下，可以对一个文本块的整体进行操作。例如，首先高亮选中一部分文本，然后用d命令删除这个文本块。可视化模式的好处在于，不但可以大大提高操作的效率，而且还可以在做改动之前，就看到操作将影响的文本。

## **可视化模式的种类**

可视化模式可以分为以下三种：

1. 用`v`命令进入的**字符可视化模式（Characterwise visual mode)**，文本选择是以字符为单位的。
2. 用`V`命令进入的**行可视化模式（Linewise visual mode)**，文本选择是以行为单位的。
3. 用`ctrl-V`进入的**块可视化模式（Blockwise visual mode）**，可以选择一个矩形内的文本。（注意：在Windows中，ctrl-V可能已经被影射为粘贴操作，可以使用`ctrl-Q`进入块可视化模式。）

## **切换可视化模式**

通过输入相应的可视化命令，就可以切换到不同的可视化模式。例如现在字符可视化模式下，如果想要切换到块可视化模式，那么只需要输入ctrl-Q即可。当然，我们也可以先用ESC关闭当前的可视化模式，然后再进入其它可视化模式。

## **在可视化模式下选择**

使用命令`v`进入**字符可视化模式**。在此模式下，用命令移动光标，光标起始位置和当前位置之间的文本将会以高亮显示。这时就可以对这些高亮显示的文本进行整体的操作。例如：在字符可视化模式中，首先用`6l`命令选中光标右侧的6个字符，然后输入`d`命令删除高亮显示的文本。

![img](https://pic4.zhimg.com/80/v2-330e731c6718b1f9bb14528dd6beeadb_720w.jpg)

使用命令`V`进入**行可视化模式**。在此模式下，我们使用`2j`命令，就可以选中当前行及其随后2行。

![img](https://pic4.zhimg.com/80/v2-8812b5ae6695ce747bf4c30ec0145ebb_720w.jpg)

使用命令`ctrl-Q`进入**块可视化模式**。在此模式下，我们使用`2l`命令向右移动，然后使用`3j`命令向下移动，就可以选中4行2列的文本块。

![img](https://pic3.zhimg.com/80/v2-fbb4442eeb446cb61871478867efd3a6_720w.jpg)

命令`gv`可以重复前一次可视化模式时选中的文本。如果已经在可视化模式下，执行该命令会选中前一次选择的文本。如果重复行执行gv命令，就会在当前选中的文本和前一次选中的文本之间进行切换。

## **在可视化模式下移动**

如果你已经在可视化模式下选择了若干文本，并且希望移动到已选择文本的另一结尾处，那么可以使用`o`命令。

![img](https://pic2.zhimg.com/80/v2-b6f7d9411c7fa08e21a90741a819cfbd_720w.jpg)

如果你使用的是块可视化模式，那么已选择的区域将有四个角落。`o`命令只能移动到对面的一个角落，这时你可以使用`O`命令移动到同一行的另一个角落。

![img](https://pic3.zhimg.com/80/v2-7b16a5a0c99e40d1b2e52fbb27e2ee2e_720w.jpg)

## **在可视化模式下编辑**

在可视化模式下，我们可以进行各种编辑操作。如`d`命令可以删除高亮显示的文本，而`D`命令则会删除一行，即使这一行中只有部分文本是高亮显示的。类似的，`y`命令将复制高亮显示的文本，而`Y`命令会复制整行。

在块可视化模式下，使用`c`命令将删除高亮选中的文本并进入插入模式，在你输入文本并点击Esc返回之后，输入的文本将插入到块选中的每一行里。

![img](https://pic3.zhimg.com/80/v2-cf6bc567199053c446ef1492f6eefba6_720w.jpg)

而`C`命令会删除从选中文本到行尾的所有字符并进入插入状态。

![img](https://pic3.zhimg.com/80/v2-6a07c0d7638fa9353c6c94eac69cf78a_720w.jpg)

针对高亮显示的文本块，我们可以用命令`~`进行大小写转换。用命令`>`增加缩进，或用命令`<`减少缩进。

我们还可以利用可视化模式，来合并多行文本。`J`命令可以将高亮显示的文本内容合并为一行，同时以空格来分隔各行。如果不希望在行间插入空格，那么可以使用`gJ`命令。

使用`g?`命令，可以使用rot 13算法来加密高亮显示的文本。针对同一个文本再次执行加密命令，就可以进行文本解密。

![img](https://pic3.zhimg.com/80/v2-7da817f0382864d74a300b478d93d302_720w.jpg)

在可视化模式下，按下:键就可以对选定范围进行操作。例如：我们先在可视化模式下选中文本，然后执行`:write block.txt`命令，就可以将文本块写入另一文件中。选择多行，然后执行`:sort`命令，则可以对选中的文本进行排序。

`Istring`命令，可以快速地在块可视化模式下添加文本。比如先用`^`命令，移动到行首；然后使用`ctrl-Q`进入块可视化模式；再利用`j`命令选中多行；而后使用`I--`命令，就可以在每行开头增加注释符。

![img](https://pic2.zhimg.com/v2-497d0958b176316c75ab8a645528b52d_b.jpg)

如果在块可视化模式下，仅仅选中了某些行，那么`Ivery`命令将不会改变未选中的行。

![img](https://pic3.zhimg.com/80/v2-7bd7d985e609855395fd5fe29dfec5da_720w.jpg)

在块可视化模式下，使用`r`命令，然后输入单个字符，将会把所有已选中的字符都替换为输入的字符。如果仅仅选中了某些行，那么未选中的行将不会受到影响。

![img](https://pic4.zhimg.com/80/v2-61ab900364bc458816dcffb1887224f3_720w.jpg)

在块可视化模式下，使用`A`命令，然后输入字符，输入的字符将会被添加到块之后。即使仅仅选中了某些行，但是未选中的行也会受到影响。

![img](https://pic2.zhimg.com/80/v2-73e32fc1a640ce38b31ed6193257413d_720w.jpg)

## **退出可视化模式**

当我们想要退出可视化模式时，可以按ESC键或ctrl+c键。

## **可视化模式的帮助信息**

输入以下命令，然后点击ctrl+D键或者Tab键将会列出和可视化相关的帮助主题；再点击Tab键可以选择打开选中的主题：

```
:help visual
```

![img](https://pic4.zhimg.com/80/v2-9c3127559f21564d83f84243c36cf11b_720w.jpg)

可以在所希望帮助的名称前加v_前缀。例如使用`:help v_d`命令，可以得到关于在可视模式下进行删除操作的帮助信息。而使用`:help v_b_r`命令，则可以得到关于在块可视模式下进行替换操作的帮助信息。使用以下命令，则可以查看更多关于可视化模式的帮助信息：

```
:help Visual-mode
```

![img](https://pic4.zhimg.com/80/v2-eb40d1fd01cc821ae8614d5694b58163_720w.jpg)



发布于 2019-03-06