#1.使用VMware Workstation安装centos7
#2.安装erlang23.3软件位置(Z:\常用软件\后端\erl23.3)
#3.安装git 18.5版本以上
#4.安装lnmp
    wget http://soft.vpser.net/lnmp/lnmp1.8.tar.gz -cO lnmp1.8.tar.gz && tar zxf lnmp1.8.tar.gz && cd lnmp1.8 && ./install.sh lnmp
#5.vMware服务器代码放在共享目录里（/mnt/hgfs/share/server）
#6.编译代码：
    [root@localhost game]# pwd
    /mnt/hgfs/share/server/game
    [root@localhost game]# make
    
# 7.初始化数据库
路径：/mnt/hgfs/share/server/game/script/dev：
init_db.sh
init_log_db.sh

#8.修改服务器配置：
    /mnt/hgfs/share/server/game/config/game_common.conf
    8.1：修改IP
    8.2：修改server_id，修改后的server_id会自动加入到服务器列表

#9.初始化数据库
路径：/mnt/hgfs/share/server/game/script/dev：
init_db.sh
init_log_db.sh

#10.开启游戏端口：
/sbin/iptables -I INPUT -p tcp --dport 8000:9999 -j ACCEPT
/sbin/iptables -I INPUT -p tcp --dport 9102 -j ACCEPT
/sbin/iptables -I INPUT -p tcp --dport 9105 -j ACCEPT
	

#运行游戏
    [root@localhost game]# pwd
    /mnt/hgfs/share/server/game
    (game_android_cn_s2@192.168.1.231)2> [root@localhost game]# ./gamectl live
    Eshell V11.2  (abort with ^G)
    (game_android_cn_s2@192.168.1.231)1> 

#11.查看服务器列表
http://192.168.1.41:9002/fn/login_auth?uid=wen

#12.更新服务器：
./cl role_server 

#13.检查是否打开调试：
%% 协议调试开关
{debug_proto, true}.

#14 协议，数据库相关配置
G:\share\server\game\sql\game_install.sql
G:\share\server\game\src\db_cache\db_cache.erl
G:\share\server\game\sql\tab.conf

#15 一个<section id="11" name="activity" desc="活动">对应一个功能协议文件
G:\share\server\game\proto\protocol.xml
G:\share\server\game\proto\proto\proto_chat.proto

#16 全编译：
make

#17 编译热更新某个模块
./cfile recruit
./gamectl reload recruit

#18 策划文档和data目录下文件对应关系
quantity_servertime.xlsx --> data_quantity_servertime.erl

启动： gitlab-ctl start
停止： gitlab-ctl stop
重启： gitlab-ctl restart

#19 生成table_*.erl 文件
make table
init_db.sh

#20 生成通信协议
make proto

#查看文件目录
du -h -x --max-depth=1

#发送协议
{role_gm_command_c2s,<<"#hero 3">>}



tapd. 流转，解决

从倒数20行开始,实时读取a.log的文件

tail -20f a.log


#set_lvl 3	玩家等级 3
#add_exp 1000	增加玩家经验 1000
#add_gold 99999999	增加金币  99999999
#add_money 999999	增加钻石  999999
#add_item 31001 1	增加道具 配置id 道具数量
#add_item_type 3	科技大礼包(最好可叠加)
#add_gold -11111	扣除金币  11111
#add_money -11111	扣除钻石  11111
#kick_self	踢自己下线
#add_gold_rate 20 999	增加金币  1-30货币id,默认999
#dec_gold_rate 20 999	减少金币  1-30货币id,默认999
#unlock_area	解锁下一个内城区域
#unlock_area_all	解锁全部区域(重登下)
"#role_notice 503 3
#role_notice 3"	提示信息测试指令

#drop 12


1 tail
在centos 或者说是在 linux 系统中，例如 tomcat 或者是 ngixn 的log 日志等等

tail -n 20  error.log 
1
查看 error.log日志文件中的最后 20行 日志内容

tail -n +20  error.log 
1
查看 error.log日志文件中的最前面的 20行 日志内容

tail -f  error.log 
1
实时跟踪查看 error.log 日志文件中的内容

2 tail 分页查询日志内容
tail -n 10000  error.log |more -1000  
1
从 error.log 日志文件中末尾向前 10000 行的位置开始,然后往下找1000行
ctrl+f 快捷键翻页 ，按回车键一行一行的向下加载

tail -n 10000  error.log |less -1000  
1
从 error.log 日志文件中末尾向前 10000 行的位置开始,然后往上找1000行
ctrl+f 快捷键翻页 ，按回车键一行一行的向上加载

more 与 less 的不同就是一个向后翻页 一个向前翻页




