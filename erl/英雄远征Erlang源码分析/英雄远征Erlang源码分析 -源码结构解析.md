英雄远征Erlang源码分析（1）-源码结构解析

偶然得到了一份英雄远征的Erlang服务端源代码，想着通过对源代码的分析，来熟悉使用Erlang编程语言的游戏服务器的设计，游戏中关键逻辑的实现。

    解压压缩文件后，在Idea内导入文件夹创建相关工程，可以看到文件结构如下：

     

    doc：协议文档
    ebin：保存编译后的ebin文件，由于是启动目录，所以也包含了gateway.app，server.app，log.config
    include：.hrl头文件
    script：可执行脚本，gateway.sh用于启动网关服务器，install.sh用于安置数据库，run.sh用于启动游戏服务器
    src：游戏erlang源码，结构如下

    
    data：如data_dungeon,data_mon，配置文件，包括副本，怪物，场景，任务等的配置，初始化的时候从这里读取
    lib：工具函数模块，接收输入返回输出
    mod：进程模块，用于创建进程，处理进程事务
    pp：协议处理模块，处理接收到的前端发送过来的协议内容
    proto：协议解析模块，根据协议号解析二进制协议内容，传递给协议处理模块
    test：包含测试函数的模块，可用于模拟客户端测试与服务器的通信
    timer：定时器模块，用于处理定时任务


    文件夹之外还有一些sd开头的模块，主要用于服务器的启动，监控树的建立，tcp端口的监听等：
    sd.erl为游戏开启的入口模块
    sd_gateway_xxx.erl为网关相关模块
    sd_tcp_xxx.erl为tcp处理相关模块
    sd_xxx_sup.erl为生成监控树的模块

    如果要运行.sh文件，则需要将sdzmmo.sql文件导入MySQL执行一遍，建立相关的数据库和表。

    从源码文件结构可知，此处有两个可启动的服务器：网关服务器和游戏服务器，分别负责玩家登入游戏前和登入游戏后的操作。接下来的文章将会对其源码进行解析。
